<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información estudiante</title>
    <link rel="stylesheet" href="/static/css/estilos_prof.css">
    <link rel="icon" href="/static/imagenes/icono_pagina.png">
</head>
<body>
    <header>
        <h1>ALPHA TEAM</h1>
            <figure class="logo_pagina">
                <img src="/static/imagenes/logo.png" alt="">
            </figure>
        </a>

            <div class="container">
            <button class="menu-btn">PROFESOR
                <img src="/static/imagenes/profesor.png" alt="profesor">
            </button>
            <div class="menu-items">
                <h6 class="gestion">Gestión perfil</h6>
            
            <a href="/alphaTeam/profesor/usuario" >Lic. Carlos Acosta
                <img src="/static/imagenes/bxs-user-circle.svg" alt="nota">
            </a>
            <a href="/alphaTeam/profesor/contraseña">Cambio de contraseña
                <img src="/static/imagenes/bxs-key1.svg" alt="nota">
            </a>
            <a href="/alphaTeam/profesor/reportar">Reportar un problema
                <img src="/static/imagenes/bx-comment-error.svg" alt="nota">
            </a>
                
            </div>
            </div>
    </header>
    
    <div class="cout">
            <button class="menu">
                <img src="/static/imagenes/bx-menu.svg" alt="">
            </button>
            <div class="content">
                <ul>
                     <li><img src="/static/imagenes/bx-notepad.svg" alt="nota">
                        <a href="/alphaTeam/profesor/calificaciones">CALIFICACIONES
                    </a></li>
                    <li><img src="/static/imagenes/bx-calendar.svg" alt="calendario">
                        <a href="/alphaTeam/profesor/horario">HORARIO ESCOLAR
                    </a></li>
                    <li><img src="/static/imagenes/bxs-graduation.svg" alt="graduacion">
                        <a href="/alphaTeam/profesor/informacion">INFORMACION ESTUDIANTE
                    </a></li>
                    <li><img src="/static/imagenes/bxs-book-content.svg" alt="evaluar">
                        <a href="/alphaTeam/profesor/planificacion">PLANIFICACION
                    </a></li>
                    <li><img src="/static/imagenes/bx-help-circle.svg" alt="ayuda">
                        <a href="/alphaTeam/profesor/ayuda">AYUDA
                    </a></li>
                    <li><img src="/static/imagenes/bx-log-out.svg" alt="cerrar">
                        <a href="/alphaTeam/templates/cerrarsesion">CERRAR SESION
                    </a></li> 
                </ul>
            </div>
        </div>
   
    <main>    
        <section>
            <div class="calificaciones_docente2">
                <form method="POST" action="{{ url_for('p_informacion') }}">
                    <fieldset>
                        <legend>LISTADO ESTUDIANTES DEL CURSO</legend>
                        <label for="cur">Cursos</label>
                        <select name="cur" id="cur" required>
                            <option value="">- Elija un curso - </option>
                            <option value="1ro" {% if selected_curso == '1ro' %}selected{% endif %}>1ro de secundaria</option>
                            <option value="2do" {% if selected_curso == '2do' %}selected{% endif %}>2do de secundaria</option>
                            <option value="3ro" {% if selected_curso == '3ro' %}selected{% endif %}>3ro de secundaria</option>
                            <option value="4to" {% if selected_curso == '4to' %}selected{% endif %}>4to de secundaria</option>
                            <option value="5to" {% if selected_curso == '5to' %}selected{% endif %}>5to de secundaria</option>
                            <option value="6to" {% if selected_curso == '6to' %}selected{% endif %}>6to de secundaria</option>
                        </select>
                    
                        <label for="asig">Materia</label>
                        <select name="asig" id="asig" required>
                            <option value="">- Elija una materia -</option>
                            <option value="">Lengua Española</option>
                            <option value="">Matemáticas</option>
                            <option value="">Ciencias Sociales</option>
                            <option value="">Ciencias Naturales</option>
                            <option value="">Física</option>
                            <option value="">Educación financiera</option>
                            <option value="">Inglés</option>
                        </select>

                        <label for="period">Periodo</label>
                        <select name="period" id="period" required>
                            <option value="">- Elija un periodo -</option>
                            <option value="2022-2023">1 Periodo</option>
                            <option value="2023-2024">2 Periodo</option>
                            <option value="2023-2024">3 Periodo</option>
                            <option value="2023-2024">4 Periodo</option>
                        </select>

                        <input type="submit" name="action" value="CARGAR" class="boton9">
                    </fieldset>
                </form>
            </div>

            <div class="tabla2">  
                <table border="1">
                    <tr>
                        <th>MATRICULA</th>
                        <th>NOMBRES</th>
                        <th>APELLIDOS</th>
                        <th>SEXO</th>
                        <th>FECHA NACIMIENTO</th>
                        <th>EDAD</th>
                    </tr>

                    {% for estudiante in estudiantes %}
                        <tr>
                            <td>{{ estudiante[0] }}</td>  
                            <td>{{ estudiante[1] }}</td> 
                            <td>{{ estudiante[2] }}</td>
                            <td>{{ estudiante[3] }}</td>  
                            <td>{{ estudiante[4] }}</td> 
                            <td>{{ estudiante[5] }}</td>   
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </section>
    </main>

    <script>
        document.getElementById('cur').addEventListener('change', function() {
            var cursoId = this.value;
            if (cursoId) {
                fetch('/get_estudiantes', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'curso_id=' + encodeURIComponent(cursoId),
                })
                .then(response => response.text())
                .then(html => {
                    document.getElementById('tabla_estudiantes').innerHTML = html;
                })
                .catch(error => console.error('Error al cargar los estudiantes:', error));
            } else {
                document.getElementById('tabla_estudiantes').innerHTML = '';
            }

        });
    </script>
    
</body>
</html>