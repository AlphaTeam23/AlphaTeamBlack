<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información de Usuario</title>
    <link rel="stylesheet" href="/static/css/estudiante.css">
    <link rel="icon" href="/static/imagenes/icono_pagina.png">
</head>
<body>
    <header>
        <h1>ALPHA TEAM</h1>
      
            <figure class="logo_pagina">
                <img src="/static/imagenes/logo.png" alt="">
            </figure>
            <div class="regresar" id="back">
                <figure>
                    <a href="javascript:history.back()">
                        <img src="/static/imagenes/flecharegresar.png" alt=""></a>
                </figure>
            </div>
    </header>
    <main>
    <section class="inf_basica_estudiante">
        <h2>MI INFORMACIÓN BÁSICA PERSONAL</h2>
        <form action="/upload_imageestuden" method="POST" enctype="multipart/form-data" id="imageUploadForm">
        <figure class="estudiante-img">
            <img src="/static/imagenes/logo.png" alt="Vista previa" id="imagenPrevia">
            <img src="/static/imagenes/bx-trash.svg" alt="Borrar" class="borrar" onclick="clearImage()">
            <label for="imageInput"></label>
            <input type="file" name="image" id="imageInput" onchange="previewImage()">
            <button type="submit" id="uploadButton">Subir</button>
        </figure>
    </form>


<div class="titinfo">
<h4>Nombre</h4><img src="/static/imagenes/bx-user copy.svg" alt="">
<p>{{ estudiante.nombre if estudiante else 'No disponible' }}</p>

<h4>Apellidos</h4><img src="/static/imagenes/bxs-user-detail.svg" alt="">
<p>{{ estudiante.apellidos if estudiante else 'No disponible' }}</p>

<h4>Género</h4><img src="/static/imagenes/bx-male-female.svg" alt="">
<p>{{ estudiante.sexo_estudiante if estudiante else 'No disponible' }}</p>

<h4>Dirección</h4><img src="/static/imagenes/bx-current-location.svg" alt="">
<p class="direccion">{{ tutor.direccion if tutor else 'No disponible' }}</p>

        </div>
    </section>
    </main>
      <script>
        // Función para mostrar la vista previa de la imagen
        function previewImage() {
            const fileInput = document.getElementById('imageInput');
            const preview = document.getElementById('imagenPrevia');
            
            // Verifica si se ha seleccionado un archivo
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    const imageDataUrl = e.target.result;
                    preview.src = imageDataUrl; // Establece la URL del archivo en la vista previa

                    // Guarda la imagen en localStorage
                    localStorage.setItem('uploadedImage', imageDataUrl);
                }

                reader.readAsDataURL(fileInput.files[0]);
            }
        }

        // Función para borrar la imagen
        function clearImage() {
            const fileInput = document.getElementById('imageInput');
            const preview = document.getElementById('imagenPrevia');

            fileInput.value = ''; // Borra el archivo seleccionado
            preview.src = '/static/imagenes/logo.png'; // Borra la vista previa

            // Elimina la imagen de localStorage
            localStorage.removeItem('uploadedImage');
        }

        // Cargar la imagen desde localStorage al cargar la página
        window.onload = function() {
            const savedImage = localStorage.getItem('uploadedImage');
            if (savedImage) {
                const preview = document.getElementById('imagenPrevia');
                preview.src = savedImage;
            }
        }
    </script>
</body>
</html>